This ActiveRecord query isn't returning the expected results:

[Paste query and describe what you expected vs. what you got]

Help me understand what's happening and fix the query while preserving readability.